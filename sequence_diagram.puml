@startuml sequence_bot_ispravitel
title Последовательность шагов — Бот "Исправитель" (текущий этап: моки)

actor Agent
participant "Excel (1С-КА)" as Excel
participant "Bot" as Bot
participant "catalogApp API" as Catalog
participant "LCSC (mock)" as LCSC
participant "LLM (mock)" as LLM
participant "Отчёт (Excel)" as Report

Agent -> Excel : Выгрузка XLSX
Excel -> Bot : Импорт данных (pandas/openpyxl)

Bot -> Catalog : Проверка partnumber
alt Совпадение найдено
    Catalog -> Bot : Карточки найдены
    Bot -> Catalog : Обновление при расхождениях
else Нет совпадения
    Catalog -> Bot : Совпадений нет
    Bot -> LCSC : Поиск кандидатов (mock)
    LCSC -> Bot : Кандидаты (brand/category/attrs)
    Bot -> LLM : Нормализация/классификация (mock)
    LLM -> Bot : Нормализованные данные (ГН, ВН, attrs)
    Bot -> Catalog : Создание новой карточки
end

Bot -> Report : Формирование Excel-отчёта
Report -> Agent : Отчёт доступен
@enduml
